
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This tool extracts metadata regarding NMR data from multiple repositories and creates FAIR-DOs for them.">
      
      
        <meta name="author" content="Maximilian Inckmann <maximilian.inckmann@kit.edu>">
      
      
        <link rel="canonical" href="https://kit-data-manager.github.io/nmr_FAIR-DOs/reference/nmr_FAIR_DOs/connectors/tpm_connector/">
      
      
        <link rel="prev" href="../terminology/">
      
      
        <link rel="next" href="../../domain/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.3">
    
    
      
        <title>tpm_connector - nmr_FAIR-DOs</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.d7758b05.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/_markdown_exec_pyodide.css">
    
      <link rel="stylesheet" href="../../../../assets/_markdown_exec_ansi.css">
    
      <link rel="stylesheet" href="../../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../../css/style.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#nmr_FAIR_DOs.connectors.tpm_connector" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
  This page is for an outdated or development version.
<!--
  ~ SPDX-FileCopyrightText: 2025 Karlsruhe Institute of Technology <maximilian.inckmann@kit.edu>
  ~ SPDX-License-Identifier: Apache-2.0
  ~
  ~ Copyright (c) 2025. Karlsruhe Institute of Technology
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ You may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!--
-->

<a href="../../../../..">
    <strong>Click here to go to the latest stable version.</strong>
  </a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="nmr_FAIR-DOs" class="md-header__button md-logo" aria-label="nmr_FAIR-DOs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            nmr_FAIR-DOs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              tpm_connector
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kit-data-manager/nmr_FAIR-DOs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    nmr_FAIR-DOs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../.." class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../quickstart/" class="md-tabs__link">
          
  
  Usage

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../contributing/" class="md-tabs__link">
          
  
  Development

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="nmr_FAIR-DOs" class="md-nav__button md-logo" aria-label="nmr_FAIR-DOs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    nmr_FAIR-DOs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kit-data-manager/nmr_FAIR-DOs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    nmr_FAIR-DOs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../credits/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Credits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    nmr_FAIR_DOs
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2_1">
            <span class="md-nav__icon md-icon"></span>
            nmr_FAIR_DOs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cli
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_2" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    connectors
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_1_2" id="__nav_2_2_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_2_1_2">
            <span class="md-nav__icon md-icon"></span>
            connectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../elasticsearch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    elasticsearch
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../terminology/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    terminology
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    tpm_connector
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    tpm_connector
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector" class="md-nav__link">
    <span class="md-ellipsis">
      tpm_connector
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector" class="md-nav__link">
    <span class="md-ellipsis">
      TPMConnector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TPMConnector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createSingleFAIRDO" class="md-nav__link">
    <span class="md-ellipsis">
      createSingleFAIRDO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createMultipleFAIRDOs" class="md-nav__link">
    <span class="md-ellipsis">
      createMultipleFAIRDOs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getPIDRecord" class="md-nav__link">
    <span class="md-ellipsis">
      getPIDRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.updatePIDRecord" class="md-nav__link">
    <span class="md-ellipsis">
      updatePIDRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getAllPIDRecords" class="md-nav__link">
    <span class="md-ellipsis">
      getAllPIDRecords
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../domain/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    domain
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_1_3" id="__nav_2_2_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            domain
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domain/dataType/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dataType
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domain/pid_record/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pid_record
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domain/pid_record_entry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pid_record_entry
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    env
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../lib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lib
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../repositories/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    repositories
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_2_1_6" id="__nav_2_2_1_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_2_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2_1_6">
            <span class="md-nav__icon md-icon"></span>
            repositories
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repositories/AbstractRepository/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AbstractRepository
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repositories/chemotion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chemotion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../repositories/nmrxiv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nmrxiv
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How To Contribute
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../dev_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../code_of_conduct/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code of Conduct
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector" class="md-nav__link">
    <span class="md-ellipsis">
      tpm_connector
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector" class="md-nav__link">
    <span class="md-ellipsis">
      TPMConnector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TPMConnector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createSingleFAIRDO" class="md-nav__link">
    <span class="md-ellipsis">
      createSingleFAIRDO
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createMultipleFAIRDOs" class="md-nav__link">
    <span class="md-ellipsis">
      createMultipleFAIRDOs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getPIDRecord" class="md-nav__link">
    <span class="md-ellipsis">
      getPIDRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.updatePIDRecord" class="md-nav__link">
    <span class="md-ellipsis">
      updatePIDRecord
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getAllPIDRecords" class="md-nav__link">
    <span class="md-ellipsis">
      getAllPIDRecords
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/kit-data-manager/nmr_FAIR-DOs/edit/main/docs/src/nmr_FAIR_DOs/connectors/tpm_connector.py" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/kit-data-manager/nmr_FAIR-DOs/raw/main/docs/src/nmr_FAIR_DOs/connectors/tpm_connector.py" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


  <h1>tpm_connector</h1>

<div class="doc doc-object doc-module">



<a id="nmr_FAIR_DOs.connectors.tpm_connector"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TPMConnector</span>


<a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">


      <p>This class handles all communication with the Typed PID Maker (TPM) (see <a href="https://kit-data-manager.github.io/webpage/typed-pid-maker">https://kit-data-manager.github.io/webpage/typed-pid-maker</a> for more information).
The Typed PID Maker is a service that allows the creation and management of FAIR-DOs (Findable, Accessible, Interoperable, Reusable Digital Objects).
It communicates with the Handle.net service to create PIDs and stores PID records in a globally persistent manner.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector._tpm_url">_tpm_url</span></code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str The URL of the Typed PID Maker instance</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>src/nmr_FAIR_DOs/connectors/tpm_connector.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">TPMConnector</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class handles all communication with the Typed PID Maker (TPM) (see https://kit-data-manager.github.io/webpage/typed-pid-maker for more information).</span>
<span class="sd">    The Typed PID Maker is a service that allows the creation and management of FAIR-DOs (Findable, Accessible, Interoperable, Reusable Digital Objects).</span>
<span class="sd">    It communicates with the Handle.net service to create PIDs and stores PID records in a globally persistent manner.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        _tpm_url:str The URL of the Typed PID Maker instance</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tpm_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a new TPMConnector</span>

<span class="sd">        Args:</span>
<span class="sd">            tpm_url:str The URL of the Typed PID Maker instance</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the TPM URL is None or empty</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tpm_url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">tpm_url</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;TPM URL must not be None or empty&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">=</span> <span class="n">tpm_url</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">createSingleFAIRDO</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pidRecord</span><span class="p">:</span> <span class="n">PIDRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a single FAIR-DO in the TPM</span>

<span class="sd">        Args:</span>
<span class="sd">            pidRecord:PIDRecord The FAIR-DO to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            PIDRecord The response from the TPM. This response contains the PID and the PID record.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating FAIR-DO </span><span class="si">{</span><span class="n">pidRecord</span><span class="o">.</span><span class="n">getPID</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">pidRecord</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">pidRecord</span><span class="p">,</span> <span class="n">PIDRecord</span>
        <span class="p">):</span>  <span class="c1"># if the PID record is None or not an instance of PIDRecord, raise an error</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;FAIR-DO must not be None and must be an instance of PIDRecord&quot;</span>
            <span class="p">)</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>

        <span class="c1"># content = self._applyTypeAPIFixes(pidRecord.toJSON()) # Possible fix for Type API issues</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">pidRecord</span><span class="o">.</span><span class="n">toJSON</span><span class="p">()</span>  <span class="c1"># get the JSON representation of the PID record</span>

        <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pid&quot;</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="p">):</span>  <span class="c1"># if the content is None or empty, raise an error</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No content to create due to invalid input&quot;</span><span class="p">)</span>

        <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">content</span>
        <span class="p">)</span>  <span class="c1"># send a POST request to the TPM to create the PID record</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response for URL </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">201</span>
        <span class="p">):</span>  <span class="c1"># if the status code is not 201, raise an error</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error creating PID record: &quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and return it</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">createMultipleFAIRDOs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pidRecord</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates multiple FAIR-DOs in the TPM.</span>
<span class="sd">        This function uses the bulk-create endpoint of the TPM to create multiple FAIR-DOs at once.</span>
<span class="sd">        One advantage of using this endpoint is that it can create multiple connected FAIR-DOs in one request and automatically replaces &quot;placeholder&quot;/&quot;fantasy&quot;/&quot;preliminary&quot; PIDs in the records with the real deal.</span>

<span class="sd">        Args:</span>
<span class="sd">            pidRecord:list[PIDRecord] The FAIR-DOs to create</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[PIDRecord] The response from the TPM which is a list of all created FAIR-DOs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">pidRecord</span><span class="p">)</span><span class="si">}</span><span class="s2"> FAIR-DOs&quot;</span><span class="p">)</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>

        <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">fairdo</span> <span class="ow">in</span> <span class="n">pidRecord</span><span class="p">:</span>  <span class="c1"># iterate over all PID records</span>
            <span class="k">if</span> <span class="n">fairdo</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
                <span class="n">fairdo</span><span class="p">,</span> <span class="n">PIDRecord</span>
            <span class="p">):</span>  <span class="c1"># Check the validity or raise an exception</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;FAIR-DO must not be None and must be an instance of PIDRecord&quot;</span>
                <span class="p">)</span>

            <span class="c1"># content.append(self._applyTypeAPIFixes(fairdo.toJSON())) # Possible fix for Type API issues</span>
            <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fairdo</span><span class="o">.</span><span class="n">toJSON</span><span class="p">())</span>  <span class="c1"># Mark this record ready for creation</span>

        <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pids&quot;</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="p">):</span>  <span class="c1"># if the content is None or empty, raise an error</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No content to create due to invalid input&quot;</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Creating FAIR-DOs at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">endpoint</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">content</span><span class="p">)[:</span><span class="mi">250</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
        <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span>
        <span class="p">)</span>  <span class="c1"># send a POST request to the TPM to create the PID records</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response for URL </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">201</span>
        <span class="p">):</span>  <span class="c1"># if the status code is not 201, raise an error</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Error creating PID records. API response from TPM: &quot;</span><span class="p">,</span>
                <span class="nb">repr</span><span class="p">(</span><span class="n">resource_response</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span>
            <span class="n">i</span>
        <span class="p">)</span> <span class="ow">in</span> <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>  <span class="c1"># iterate over all PID records in the response</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and add it to the result list</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully created FAIR-DOs&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>  <span class="c1"># return the list of all created PID records (with their actual PIDs)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">getPIDRecord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves a PID record from the TPM</span>

<span class="sd">        Args:</span>
<span class="sd">            pid (str): The PID to retrieve</span>

<span class="sd">        Returns:</span>
<span class="sd">            PIDRecord: The PID record retrieved from the TPM</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the PID is None or empty</span>
<span class="sd">            Exception: If the PID record cannot be retrieved</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pid</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># if the PID is None or empty, raise an error</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;PID must not be None or empty&quot;</span><span class="p">)</span>

        <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pid/&quot;</span> <span class="o">+</span> <span class="n">pid</span>

        <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
        <span class="p">)</span>  <span class="c1"># send a GET request to the TPM to retrieve the PID record</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span>
        <span class="p">):</span>  <span class="c1"># if the status code is not 200, raise an error</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error retrieving PID record: &quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and return it</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">updatePIDRecord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pidRecord</span><span class="p">:</span> <span class="n">PIDRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates a PID record in the TPM</span>

<span class="sd">        Args:</span>
<span class="sd">            pidRecord:PIDRecord The PID record to update</span>

<span class="sd">        Returns:</span>
<span class="sd">            PIDRecord The response from the TPM</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the PID record is None or not an instance of PIDRecord</span>
<span class="sd">            Exception: If the PID record cannot be updated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">pidRecord</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">pidRecord</span><span class="p">,</span> <span class="n">PIDRecord</span>
        <span class="p">):</span>  <span class="c1"># if the PID record is None or not an instance of PIDRecord, raise an error</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;PID record must not be None and must be an instance of PIDRecord&quot;</span>
            <span class="p">)</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>

        <span class="n">content</span> <span class="o">=</span> <span class="n">pidRecord</span><span class="o">.</span><span class="n">toJSON</span><span class="p">()</span>  <span class="c1"># get the JSON representation of the PID record</span>

        <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pid/&quot;</span> <span class="o">+</span> <span class="n">pidRecord</span><span class="o">.</span><span class="n">getPID</span><span class="p">()</span>  <span class="c1"># create the endpoint URL</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="p">):</span>  <span class="c1"># if the content is None or empty, raise an error</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No content to update due to invalid input&quot;</span><span class="p">)</span>

        <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">content</span>
        <span class="p">)</span>  <span class="c1"># send a PUT request to the TPM to update the PID record</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span>
        <span class="p">):</span>  <span class="c1"># if the status code is not 200, raise an error</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;Error updating PID record: &quot;</span><span class="p">,</span>
                <span class="n">resource_response</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
        <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and return it</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">getAllPIDRecords</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves all PID records from the TPM.</span>
<span class="sd">        This function uses the known-pid endpoint of the TPM to retrieve all PID records.</span>
<span class="sd">        Keep in mind that the TPM does not necessarily know all PIDs in the system or even in the prefix or same instance.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[PIDRecord] The list of all PID records</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/known-pid&quot;</span>

        <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
        <span class="p">)</span>  <span class="c1"># send a GET request to the TPM to retrieve all PID records</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span>
        <span class="p">):</span>  <span class="c1"># if the status code is not 200, raise an error</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error retrieving PID records: &quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

        <span class="n">url_template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span>
            <span class="s2">&quot;$tpmURL/api/v1/pit/pid/$pid&quot;</span>
        <span class="p">)</span>  <span class="c1"># create a template for the URL</span>

        <span class="n">single_pidRecord_urls</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="p">(</span>
            <span class="n">i</span>
        <span class="p">)</span> <span class="ow">in</span> <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>  <span class="c1"># iterate over all PID records in the response</span>
            <span class="c1"># Create the URL</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">safe_substitute</span><span class="p">(</span>
                <span class="n">tpmURL</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="p">,</span>
                <span class="n">pid</span><span class="o">=</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;pid&quot;</span><span class="p">],</span>
            <span class="p">)</span>  <span class="c1"># create the URL for the PID record</span>
            <span class="n">single_pidRecord_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># add the URL to the list</span>

        <span class="c1"># Fetch all PID records in a parallelized manner. Do not use the cache.</span>
        <span class="n">json_records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch_multiple</span><span class="p">(</span><span class="n">single_pidRecord_urls</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">json_records</span><span class="p">:</span>  <span class="c1"># iterate over all PID records in the response</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and add it to the result list</span>

        <span class="k">return</span> <span class="n">result</span>  <span class="c1"># return the list of all fetched PID records</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_applyTypeAPIFixes</span><span class="p">(</span><span class="n">content</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Applies fixes to the content to match the TPM API.</span>
<span class="sd">        This is due to an issue in the schema generation of the Type API.</span>

<span class="sd">        Args:</span>
<span class="sd">            content:dict The content to fix</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict The fixed content</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the content is None or not a dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Define a set of types that need to be fixed and the new name of the internal key</span>
        <span class="n">types_to_fix</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;21.T11969/8710d753ad10f371189b&quot;</span><span class="p">:</span> <span class="s2">&quot;landingPageLocation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;21.T11148/f3f0cbaa39fa9966b279&quot;</span><span class="p">:</span> <span class="s2">&quot;identifier&quot;</span><span class="p">,</span>
            <span class="s2">&quot;21.T11969/7a19f6d5c8e63dd6bfcb&quot;</span><span class="p">:</span> <span class="s2">&quot;NMR_Method&quot;</span><span class="p">,</span>
            <span class="s2">&quot;21.T11148/7fdada5846281ef5d461&quot;</span><span class="p">:</span> <span class="s2">&quot;locationPreview/Sample&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">content</span><span class="p">,</span> <span class="nb">dict</span>
        <span class="p">):</span>  <span class="c1"># if the content is None or not a dict, raise an error</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Content must not be None and must be a dict&quot;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pid&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">[</span><span class="s2">&quot;pid&quot;</span><span class="p">],</span> <span class="s2">&quot;entries&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span>
            <span class="s2">&quot;entries&quot;</span>
        <span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># iterate over all entries in the content</span>
            <span class="n">fix_name</span> <span class="o">=</span> <span class="n">types_to_fix</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>  <span class="c1"># get the fix name for the current key</span>

            <span class="k">if</span> <span class="n">fix_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># if a fix name is available</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fixing content for type </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">fix_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>  <span class="c1"># iterate over all values to this key</span>
                    <span class="n">newEntry</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s1">&#39;{&quot;&#39;</span> <span class="o">+</span> <span class="n">fix_name</span> <span class="o">+</span> <span class="s1">&#39;&quot;: &quot;&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;&quot;}&#39;</span><span class="p">,</span>
                    <span class="p">}</span>  <span class="c1"># create a new entry with the fixed name and value in an internal JSON string</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newEntry</span><span class="p">)</span>  <span class="c1"># add the new entry to the list</span>
                <span class="n">result</span><span class="p">[</span><span class="s2">&quot;entries&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>  <span class="c1"># define the new entries for the key</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fixed content for type </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c1"># if no fix name is available</span>
                <span class="n">result</span><span class="p">[</span><span class="s2">&quot;entries&quot;</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>  <span class="c1"># use the original value</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No fix for type </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span>  <span class="c1"># return the fixed content</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


<a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.__init__" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="fm">__init__</span><span class="p">(</span><span class="nf">tpm_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Creates a new TPMConnector</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>tpm_url</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str The URL of the Typed PID Maker instance</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the TPM URL is None or empty</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/nmr_FAIR_DOs/connectors/tpm_connector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tpm_url</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a new TPMConnector</span>

<span class="sd">    Args:</span>
<span class="sd">        tpm_url:str The URL of the Typed PID Maker instance</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the TPM URL is None or empty</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">tpm_url</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">tpm_url</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;TPM URL must not be None or empty&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">=</span> <span class="n">tpm_url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createSingleFAIRDO" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">createSingleFAIRDO</span>


<a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createSingleFAIRDO" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">createSingleFAIRDO</span><span class="p">(</span><span class="n">pidRecord</span><span class="p">:</span> <span class="n">PIDRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Creates a single FAIR-DO in the TPM</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pidRecord</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PIDRecord The FAIR-DO to create</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PIDRecord The response from the TPM. This response contains the PID and the PID record.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/nmr_FAIR_DOs/connectors/tpm_connector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">createSingleFAIRDO</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pidRecord</span><span class="p">:</span> <span class="n">PIDRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a single FAIR-DO in the TPM</span>

<span class="sd">    Args:</span>
<span class="sd">        pidRecord:PIDRecord The FAIR-DO to create</span>

<span class="sd">    Returns:</span>
<span class="sd">        PIDRecord The response from the TPM. This response contains the PID and the PID record.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating FAIR-DO </span><span class="si">{</span><span class="n">pidRecord</span><span class="o">.</span><span class="n">getPID</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">pidRecord</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
        <span class="n">pidRecord</span><span class="p">,</span> <span class="n">PIDRecord</span>
    <span class="p">):</span>  <span class="c1"># if the PID record is None or not an instance of PIDRecord, raise an error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;FAIR-DO must not be None and must be an instance of PIDRecord&quot;</span>
        <span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>

    <span class="c1"># content = self._applyTypeAPIFixes(pidRecord.toJSON()) # Possible fix for Type API issues</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">pidRecord</span><span class="o">.</span><span class="n">toJSON</span><span class="p">()</span>  <span class="c1"># get the JSON representation of the PID record</span>

    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pid&quot;</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="p">):</span>  <span class="c1"># if the content is None or empty, raise an error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No content to create due to invalid input&quot;</span><span class="p">)</span>

    <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">content</span>
    <span class="p">)</span>  <span class="c1"># send a POST request to the TPM to create the PID record</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response for URL </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">201</span>
    <span class="p">):</span>  <span class="c1"># if the status code is not 201, raise an error</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error creating PID record: &quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and return it</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createMultipleFAIRDOs" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">createMultipleFAIRDOs</span>


<a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.createMultipleFAIRDOs" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">createMultipleFAIRDOs</span><span class="p">(</span>
    <span class="n">pidRecord</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Creates multiple FAIR-DOs in the TPM.
This function uses the bulk-create endpoint of the TPM to create multiple FAIR-DOs at once.
One advantage of using this endpoint is that it can create multiple connected FAIR-DOs in one request and automatically replaces "placeholder"/"fantasy"/"preliminary" PIDs in the records with the real deal.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pidRecord</code></td>
            <td>
                  <code>list[<a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[PIDRecord] The FAIR-DOs to create</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list[<a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[PIDRecord] The response from the TPM which is a list of all created FAIR-DOs</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/nmr_FAIR_DOs/connectors/tpm_connector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">createMultipleFAIRDOs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pidRecord</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates multiple FAIR-DOs in the TPM.</span>
<span class="sd">    This function uses the bulk-create endpoint of the TPM to create multiple FAIR-DOs at once.</span>
<span class="sd">    One advantage of using this endpoint is that it can create multiple connected FAIR-DOs in one request and automatically replaces &quot;placeholder&quot;/&quot;fantasy&quot;/&quot;preliminary&quot; PIDs in the records with the real deal.</span>

<span class="sd">    Args:</span>
<span class="sd">        pidRecord:list[PIDRecord] The FAIR-DOs to create</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[PIDRecord] The response from the TPM which is a list of all created FAIR-DOs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Creating </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">pidRecord</span><span class="p">)</span><span class="si">}</span><span class="s2"> FAIR-DOs&quot;</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>

    <span class="n">content</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">fairdo</span> <span class="ow">in</span> <span class="n">pidRecord</span><span class="p">:</span>  <span class="c1"># iterate over all PID records</span>
        <span class="k">if</span> <span class="n">fairdo</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">fairdo</span><span class="p">,</span> <span class="n">PIDRecord</span>
        <span class="p">):</span>  <span class="c1"># Check the validity or raise an exception</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;FAIR-DO must not be None and must be an instance of PIDRecord&quot;</span>
            <span class="p">)</span>

        <span class="c1"># content.append(self._applyTypeAPIFixes(fairdo.toJSON())) # Possible fix for Type API issues</span>
        <span class="n">content</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fairdo</span><span class="o">.</span><span class="n">toJSON</span><span class="p">())</span>  <span class="c1"># Mark this record ready for creation</span>

    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pids&quot;</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="p">):</span>  <span class="c1"># if the content is None or empty, raise an error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No content to create due to invalid input&quot;</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Creating FAIR-DOs at </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">endpoint</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">content</span><span class="p">)[:</span><span class="mi">250</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>  <span class="c1"># send a POST request to the TPM to create the PID records</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Response for URL </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">endpoint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">201</span>
    <span class="p">):</span>  <span class="c1"># if the status code is not 201, raise an error</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Error creating PID records. API response from TPM: &quot;</span><span class="p">,</span>
            <span class="nb">repr</span><span class="p">(</span><span class="n">resource_response</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span>
        <span class="n">i</span>
    <span class="p">)</span> <span class="ow">in</span> <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>  <span class="c1"># iterate over all PID records in the response</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and add it to the result list</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Successfully created FAIR-DOs&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>  <span class="c1"># return the list of all created PID records (with their actual PIDs)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getPIDRecord" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">getPIDRecord</span>


<a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getPIDRecord" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">getPIDRecord</span><span class="p">(</span><span class="n">pid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Retrieves a PID record from the TPM</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pid</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PID to retrieve</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>PIDRecord</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The PID record retrieved from the TPM</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the PID is None or empty</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>Exception</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the PID record cannot be retrieved</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/nmr_FAIR_DOs/connectors/tpm_connector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">getPIDRecord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pid</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves a PID record from the TPM</span>

<span class="sd">    Args:</span>
<span class="sd">        pid (str): The PID to retrieve</span>

<span class="sd">    Returns:</span>
<span class="sd">        PIDRecord: The PID record retrieved from the TPM</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the PID is None or empty</span>
<span class="sd">        Exception: If the PID record cannot be retrieved</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">pid</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">pid</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># if the PID is None or empty, raise an error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;PID must not be None or empty&quot;</span><span class="p">)</span>

    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pid/&quot;</span> <span class="o">+</span> <span class="n">pid</span>

    <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
    <span class="p">)</span>  <span class="c1"># send a GET request to the TPM to retrieve the PID record</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span>
    <span class="p">):</span>  <span class="c1"># if the status code is not 200, raise an error</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error retrieving PID record: &quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and return it</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.updatePIDRecord" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">updatePIDRecord</span>


<a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.updatePIDRecord" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">updatePIDRecord</span><span class="p">(</span><span class="n">pidRecord</span><span class="p">:</span> <span class="n">PIDRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Updates a PID record in the TPM</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pidRecord</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PIDRecord The PID record to update</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PIDRecord The response from the TPM</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>ValueError</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the PID record is None or not an instance of PIDRecord</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code>Exception</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the PID record cannot be updated</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/nmr_FAIR_DOs/connectors/tpm_connector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">updatePIDRecord</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pidRecord</span><span class="p">:</span> <span class="n">PIDRecord</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">PIDRecord</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a PID record in the TPM</span>

<span class="sd">    Args:</span>
<span class="sd">        pidRecord:PIDRecord The PID record to update</span>

<span class="sd">    Returns:</span>
<span class="sd">        PIDRecord The response from the TPM</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the PID record is None or not an instance of PIDRecord</span>
<span class="sd">        Exception: If the PID record cannot be updated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">pidRecord</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
        <span class="n">pidRecord</span><span class="p">,</span> <span class="n">PIDRecord</span>
    <span class="p">):</span>  <span class="c1"># if the PID record is None or not an instance of PIDRecord, raise an error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;PID record must not be None and must be an instance of PIDRecord&quot;</span>
        <span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>

    <span class="n">content</span> <span class="o">=</span> <span class="n">pidRecord</span><span class="o">.</span><span class="n">toJSON</span><span class="p">()</span>  <span class="c1"># get the JSON representation of the PID record</span>

    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/pid/&quot;</span> <span class="o">+</span> <span class="n">pidRecord</span><span class="o">.</span><span class="n">getPID</span><span class="p">()</span>  <span class="c1"># create the endpoint URL</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">content</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">content</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="p">):</span>  <span class="c1"># if the content is None or empty, raise an error</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No content to update due to invalid input&quot;</span><span class="p">)</span>

    <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">put</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">content</span>
    <span class="p">)</span>  <span class="c1"># send a PUT request to the TPM to update the PID record</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span>
    <span class="p">):</span>  <span class="c1"># if the status code is not 200, raise an error</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Error updating PID record: &quot;</span><span class="p">,</span>
            <span class="n">resource_response</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and return it</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getAllPIDRecords" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">getAllPIDRecords</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

<a href="#nmr_FAIR_DOs.connectors.tpm_connector.TPMConnector.getAllPIDRecords" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">getAllPIDRecords</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

      <p>Retrieves all PID records from the TPM.
This function uses the known-pid endpoint of the TPM to retrieve all PID records.
Keep in mind that the TPM does not necessarily know all PIDs in the system or even in the prefix or same instance.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list[<a class="autorefs autorefs-internal" title="nmr_FAIR_DOs.domain.pid_record.PIDRecord" href="../../domain/pid_record/#nmr_FAIR_DOs.domain.pid_record.PIDRecord">PIDRecord</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[PIDRecord] The list of all PID records</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>src/nmr_FAIR_DOs/connectors/tpm_connector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">getAllPIDRecords</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">PIDRecord</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves all PID records from the TPM.</span>
<span class="sd">    This function uses the known-pid endpoint of the TPM to retrieve all PID records.</span>
<span class="sd">    Keep in mind that the TPM does not necessarily know all PIDs in the system or even in the prefix or same instance.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[PIDRecord] The list of all PID records</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;/api/v1/pit/known-pid&quot;</span>

    <span class="n">resource_response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">}</span>
    <span class="p">)</span>  <span class="c1"># send a GET request to the TPM to retrieve all PID records</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">resource_response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span>
    <span class="p">):</span>  <span class="c1"># if the status code is not 200, raise an error</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Error retrieving PID records: &quot;</span><span class="p">,</span> <span class="n">resource_response</span><span class="p">)</span>

    <span class="n">url_template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span>
        <span class="s2">&quot;$tpmURL/api/v1/pit/pid/$pid&quot;</span>
    <span class="p">)</span>  <span class="c1"># create a template for the URL</span>

    <span class="n">single_pidRecord_urls</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span>
        <span class="n">i</span>
    <span class="p">)</span> <span class="ow">in</span> <span class="n">resource_response</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>  <span class="c1"># iterate over all PID records in the response</span>
        <span class="c1"># Create the URL</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">url_template</span><span class="o">.</span><span class="n">safe_substitute</span><span class="p">(</span>
            <span class="n">tpmURL</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_tpm_url</span><span class="p">,</span>
            <span class="n">pid</span><span class="o">=</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;pid&quot;</span><span class="p">],</span>
        <span class="p">)</span>  <span class="c1"># create the URL for the PID record</span>
        <span class="n">single_pidRecord_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>  <span class="c1"># add the URL to the list</span>

    <span class="c1"># Fetch all PID records in a parallelized manner. Do not use the cache.</span>
    <span class="n">json_records</span> <span class="o">=</span> <span class="k">await</span> <span class="n">fetch_multiple</span><span class="p">(</span><span class="n">single_pidRecord_urls</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">json_records</span><span class="p">:</span>  <span class="c1"># iterate over all PID records in the response</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">PIDRecord</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="p">)</span>  <span class="c1"># parse a PID record from the response JSON and add it to the result list</span>

    <span class="k">return</span> <span class="n">result</span>  <span class="c1"># return the list of all fetched PID records</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../terminology/" class="md-footer__link md-footer__link--prev" aria-label="Previous: terminology">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                terminology
              </div>
            </div>
          </a>
        
        
          
          <a href="../../domain/" class="md-footer__link md-footer__link--next" aria-label="Next: domain">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                domain
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  ~ SPDX-FileCopyrightText: 2025 Karlsruhe Institute of Technology <maximilian.inckmann@kit.edu>
  ~ SPDX-License-Identifier: Apache-2.0
  ~
  ~ Copyright (c) 2025. Karlsruhe Institute of Technology
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ You may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!--
  -->

<div class="md-copyright">
  
  
    Made with
    <a
      href="https://squidfunk.github.io/mkdocs-material/"
      target="_blank" rel="noopener"
    >
      Material for MkDocs
    </a>
    <!-- added link to project template -->
    and
    <a
      href="https://github.com/Materials-Data-Science-and-Informatics/fair-python-cookiecutter"
      target="_blank" rel="noopener"
    >
      fair-python-cookiecutter
    </a>
    <!-- ------------------------------ -->
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/kit-data-manager" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["content.action.edit", "content.action.view", "content.code.annotate", "header.autohide", "navigation.footer", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.top", "search.highlight", "search.suggest"], "search": "../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../../../assets/_markdown_exec_pyodide.js"></script>
      
    
  </body>
</html>